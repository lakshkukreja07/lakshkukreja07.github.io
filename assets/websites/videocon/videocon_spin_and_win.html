<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Videocon Spin & Win</title>

    <style>
        @font-face {
            font-family: 'Geist Sans';
            src: url('https://lakshkukreja07.github.io/assets/fonts/geist/Geist-Regular.woff2') format('woff2');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }

        body {
            margin: 0;
            height: 100vh;
            background: #1e1e1e;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Geist Sans', sans-serif;
            color: white;
            user-select: none;
        }

        .wrapper {
            width: 1100px;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .machine {
            position: relative;
            width: 420px;
            height: 300px;
        }

        .machine-body {
            position: absolute;
            inset: 0;
            background: linear-gradient(145deg, #ff6a3d, #d84315);
            border-radius: 30px;
            box-shadow:
                inset 0 12px 20px rgba(255, 255, 255, .5),
                inset 0 -15px 20px rgba(0, 0, 0, .45),
                0 40px 80px rgba(0, 0, 0, .7);
        }

        .machine-inner {
            position: absolute;
            inset: 18px;
            background: #ff5a2f;
            border-radius: 22px;
            box-shadow:
                inset 0 8px 12px rgba(255, 255, 255, .3),
                inset 0 -10px 15px rgba(0, 0, 0, .35);
        }

        .window-frame {
            position: absolute;
            top: 60px;
            left: 70px;
            right: 70px;
            height: 150px;
            padding: 10px;
            background: linear-gradient(#3b3b3b, #000);
            border-radius: 20px;
        }

        .window {
            height: 100%;
            background: #e5e5e5;
            border-radius: 14px;
            overflow: hidden;
            position: relative;
        }

        .reel-strip {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
        }

        .reel-item {
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            color: black;
        }

        .spinning {
            filter: blur(6px);
        }

        .lever {
            position: absolute;
            right: -30px;
            top: 80px;
            width: 80px;
            height: 200px;
        }

        .lever-housing {
            position: absolute;
            right: -25px;
            width: 55px;
            height: 170px;
            border-radius: 28px;
            background: linear-gradient(to right, #111, #ddd, #111);
        }

        .lever-arm {
            position: absolute;
            right: -6px;
            top: -70px;
            width: 12px;
            height: 150px;
        }

        .lever-rod {
            width: 12px;
            height: 130px;
            background: linear-gradient(to right, #222, #aaa, #222);
        }

        .lever-knob {
            position: absolute;
            top: -35px;
            left: -13px;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ff7b7b, #b30000);
            cursor: pointer;
        }

        .lever-disabled .lever-knob {
            background: #555;
            cursor: not-allowed;
        }

        .panel {
            width: 550px;
        }

        .panel h1 {
            margin: 0 0 15px;
            font-size: 28px;
        }

        .spins-left {
            font-size: 18px;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: #2a2a2a;
        }

        th,
        td {
            padding: 10px;
            border: 1px solid #444;
            text-align: center;
        }

        th {
            background: #333;
        }
    </style>
</head>

<body>

    <div class="wrapper">

        <div class="machine">
            <div class="machine-body"></div>
            <div class="machine-inner"></div>

            <div class="window-frame">
                <div class="window">
                    <div class="reel-strip" id="strip"></div>
                </div>
            </div>

            <div class="lever" id="lever">
                <div class="lever-housing"></div>
                <div class="lever-arm" id="arm">
                    <div class="lever-rod"></div>
                    <div class="lever-knob" id="knob"></div>
                </div>
            </div>
        </div>

        <div class="panel">
            <h1>Videocon Spin & Win Event</h1>
            <div class="spins-left">Spins Left: <span id="spinsLeft">1</span></div>

            <table>
                <thead>
                    <tr>
                        <th>Sr No</th>
                        <th>Date & Time</th>
                        <th>Result</th>
                    </tr>
                </thead>
                <tbody id="resultTable"></tbody>
            </table>
        </div>

    </div>

    <script>

        const strip = document.getElementById("strip");
        const knob = document.getElementById("knob");
        const arm = document.getElementById("arm");
        const lever = document.getElementById("lever");
        const spinsLeftDisplay = document.getElementById("spinsLeft");
        const table = document.getElementById("resultTable");

        const options = [
            "Better Luck",
            "â‚¹500 Cashback",
            "20% Discount",
            "Free Delivery"
        ];

        const itemHeight = 150;
        let spinsLeft = 1;
        let spinCount = 0;

        let extended = [];
        for (let i = 0; i < 7; i++) extended.push(...options);

        extended.forEach(text => {
            const div = document.createElement("div");
            div.className = "reel-item";
            div.textContent = text;
            strip.appendChild(div);
        });

        let baseIndex = options.length * 3;
        strip.style.transform = `translateY(${-baseIndex * itemHeight}px)`;

        let dragging = false, startY = 0, pull = 0;

        knob.addEventListener("mousedown", e => {
            if (spinsLeft <= 0) return;
            dragging = true;
            startY = e.clientY;
        });

        document.addEventListener("mousemove", e => {
            if (!dragging) return;
            pull = e.clientY - startY;
            if (pull < 0) pull = 0;
            if (pull > 90) pull = 90;
            arm.style.transform = `translateY(${pull}px)`;
        });

        document.addEventListener("mouseup", () => {
            if (!dragging) return;
            dragging = false;

            arm.style.transition = "transform .5s cubic-bezier(.2,1.6,.3,1)";
            arm.style.transform = "translateY(0)";
            setTimeout(() => arm.style.transition = "", 500);

            if (pull > 60 && spinsLeft > 0) spin();
        });

        function spin() {

            spinsLeft--;
            spinsLeftDisplay.textContent = spinsLeft;
            lever.classList.add("lever-disabled");

            const randomIndex = Math.floor(Math.random() * options.length);
            const loops = 20;
            const finalIndex = baseIndex + loops * options.length + randomIndex;

            strip.classList.add("spinning");
            strip.style.transition = "transform 3s cubic-bezier(.15,.85,.25,1)";
            strip.style.transform = `translateY(${-finalIndex * itemHeight}px)`;

            setTimeout(() => {
                strip.classList.remove("spinning");

                baseIndex = options.length * 3 + randomIndex;
                strip.style.transition = "none";
                strip.style.transform = `translateY(${-baseIndex * itemHeight}px)`;

                logResult(options[randomIndex]);
            }, 3000);
        }

        function logResult(result) {
            spinCount++;
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${spinCount}</td>
                <td>${new Date().toLocaleString()}</td>
                <td>${result}</td>
            `;
            table.appendChild(row);
        }

        /* Secret Reset: Ctrl/Cmd + Shift + R */
        document.addEventListener("keydown", e => {
            if ((e.ctrlKey || e.metaKey) && e.shiftKey && (e.key === "R" || e.key === "r")) {
                e.preventDefault();

                spinsLeft = 1;
                spinCount = 0;

                spinsLeftDisplay.textContent = 1;
                table.innerHTML = "";
                lever.classList.remove("lever-disabled");
            }
        });

    </script>

</body>

</html>
